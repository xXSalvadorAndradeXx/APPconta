<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Salario</title>
    <style>
@font-face {
    font-family: 'Samsung';
    src: url('Samsung-Bold.woff2') format('woff2'),
         url('Samsung-Bold.woff') format('woff'),
         url('Samsung-Bold.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
}

        /* Estilos generales */
        body {
            font-family: 'Samsung', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #1c1c1e;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            box-sizing: border-box;
        }

        .container {
            max-width: 900px;
            width: 100%;
            padding: 24px;
            background: #ffffff;
            border-radius: 24px;
            box-shadow: 0px 8px 24px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 24px;
            flex-direction: row;
        }

        .form-section, .results-section {
            flex: 1;
            margin: 10px;
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            color: #1c1c1e;
            text-align: center;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #6b6b6f;
        }

        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            background-color: #fafafa;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        input:focus {
            border-color: #0078d4;
            outline: none;
            box-shadow: 0px 0px 0px 3px rgba(0, 120, 212, 0.1);
        }

        button {
            font-family: 'Samsung', -apple-system, BlinkMacSystemFont, sans-serif;
            width: 100%;
            padding: 14px;
            background-color: #0078d4;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        button:hover {
            background-color: #005a9e;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .results {
            padding: 20px;
            background-color: #fafafa;
            border-radius: 12px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.05);
        }

        .results p {
            margin: 12px 0;
            font-size: 14px;
            color: #6b6b6f;
        }

        .results p strong {
            color: #1c1c1e;
        }

        hr {
            border: 0;
            height: 1px;
            background-color: #e0e0e0;
            margin: 16px 0;
        }

        /* Estilos responsivos */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .form-section, .results-section {
                margin: 0;
                width: 100%;
            }

            h1 {
                font-size: 24px;
            }

            .form-group {
                margin-bottom: 16px;
            }

            input, button {
                font-size: 14px;
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 20px;
            }

            input, button {
                font-size: 12px;
                padding: 8px;
            }

            .results p {
                font-size: 12px;
            }
        }



        #popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #0078d4;
      color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      font-size: 18px;
      text-align: center;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    #popup.show {
      opacity: 1;
    }


    
    </style>
</head>
<body>
 
    <div id="popup">Bienvenido a la Calculadora Salarial de Salvador Andrade</div>
    <div class="container">
        <!-- Sección del formulario -->
        <div class="form-section">
            <h1>Calculadora de Salario</h1>
            <form id="salaryForm">
                <div class="form-group">
                    <label for="firstName">Nombre:</label>
                    <input type="text" id="firstName" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="lastName">Apellido:</label>
                    <input type="text" id="lastName" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="position">Cargo:</label>
                    <input type="text" id="position" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="salary">Salario:</label>
                    <input type="number" id="salary" required min="365" step="0.01" placeholder="Ingresa un salario mayor a $365" autocomplete="off">
                </div>
                
                <button type="submit">Calcular</button>
            </form>
        </div>

        <!-- Sección de resultados -->
        <div class="results-section">
            <div class="results" id="results">
                <!-- Los resultados aparecerán aquí -->
            </div>
            <button id="downloadExcel" style="margin-top: 20px; display: none;">Descargar Excel</button>
        </div>
    </div>

    <!-- Incluir la biblioteca SheetJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>


    // Obtener el popup
    const popup = document.getElementById("popup");

    // Mostrar con animación
    popup.classList.add("show");

    // Ocultar después de 3 segundos
    setTimeout(() => {
      popup.classList.remove("show");
    }, 3000);

    // Eliminar el popup completamente después de la animación
    setTimeout(() => {
      popup.style.display = "none";
    }, 3500); // Espera 500ms adicionales para que termine la transición

    
        document.getElementById('salaryForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Evita que el formulario se envíe
            calculateSalary();
        });
    
        function calculateSalary() {
            const salary = parseFloat(document.getElementById('salary').value);
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const position = document.getElementById('position').value;
    
            // Calcular ISSS
            const isss = salary > 1062.50 ? 30 : salary * 0.03;
    
            // Calcular AFP
            const afp = salary * 0.0725;
    
            // Calcular renta imponible
            const rentaImponible = salary - isss - afp;
    
            // Calcular ISR
            let isr = 0;
            if (rentaImponible > 2038.10) {
                isr = (rentaImponible - 2038.10) * 0.30 + 288.57;
            } else if (rentaImponible > 895.24) {
                isr = (rentaImponible - 895.24) * 0.20 + 60.00;
            } else if (rentaImponible > 472.00) {
                isr = (rentaImponible - 472.00) * 0.10 + 17.67;
            }
    
            // Calcular ISSSpatrono
            const ISSSpatrono = salary > 1062.50 ? 75 : salary * 0.075;
    
            // Calcular AFPpatrono
            const AFPpatrono = salary * 0.0825;
    
            // Calcular totales
            const totalIsss = isss + ISSSpatrono;
            const totalAfp = afp + AFPpatrono;
    
            // Calcular salario líquido
            const salarioLiquido = rentaImponible - isr;
    
            // Mostrar resultados
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <p><strong>Nombre Completo:</strong> ${firstName} ${lastName}</p>
                <p><strong>Cargo:</strong> ${position}</p>
                <p><strong>Salario Bruto:</strong> $${salary.toFixed(2)}</p>
                <p><strong>ISSS (3% ):</strong> $${isss.toFixed(2)}</p>
                <p><strong>AFP (7.25%):</strong> $${afp.toFixed(2)}</p>
                <p><strong>Renta Imponible:</strong> $${rentaImponible.toFixed(2)}</p>
                <p><strong>ISR:</strong> $${isr.toFixed(2)}</p>
                <p><strong>Salario Líquido:</strong> $${salarioLiquido.toFixed(2)}</p>
                <hr>
                <p><strong>ISSS (7.5% ):</strong> $${ISSSpatrono.toFixed(2)}</p>
                <p><strong>AFP (8.75% ):</strong> $${AFPpatrono.toFixed(2)}</p>
                <p><strong>Total ISSS :</strong> $${totalIsss.toFixed(2)}</p>
                <p><strong>Total AFP </strong> $${totalAfp.toFixed(2)}</p>
            `;
    
            // Mostrar el botón de descarga
            document.getElementById('downloadExcel').style.display = 'block';
    
            // Guardar los datos para el Excel
            const data = [
                ["Nombre Completo", "Cargo", "Salario Bruto", "ISSS", "AFP", "Renta Imponible", "ISR", "Salario Líquido", "ISSSpatrono", "AFPpatrono", "Total ISSS", "Total AFP"],
                [`${firstName} ${lastName}`, position, salary.toFixed(2), isss.toFixed(2), afp.toFixed(2), rentaImponible.toFixed(2), isr.toFixed(2), salarioLiquido.toFixed(2), ISSSpatrono.toFixed(2), AFPpatrono.toFixed(2), totalIsss.toFixed(2), totalAfp.toFixed(2)]
            ];
    
            // Configurar el evento de descarga
            document.getElementById('downloadExcel').addEventListener('click', () => {
                const workbook = XLSX.utils.book_new();
                const worksheet = XLSX.utils.aoa_to_sheet(data);
                XLSX.utils.book_append_sheet(workbook, worksheet, "Datos de Salario");
                XLSX.writeFile(workbook, "datos_salario.xlsx");
            });
        }
    </script>
    
</body>
</html>


